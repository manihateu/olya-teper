(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{2936:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(9287)}])},9287:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var l=a(7876),n=a(4232);function s(){let[e,t]=(0,n.useState)([]),[a,s]=(0,n.useState)(""),[i,o]=(0,n.useState)(""),[d,r]=(0,n.useState)(null),[c,u]=(0,n.useState)(null);(0,n.useEffect)(()=>{fetch("/api/books").then(e=>e.json()).then(e=>t(e))},[]),console.log(c);let p=async()=>{let l=null;if(d){let e=new FormData;e.append("file",d);let t=await fetch("/api/books/upload",{method:"POST",body:e});l=(await t.json()).pdfUrl}let n=await fetch("/api/books",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:a,author:i,pdfUrl:l})});t([...e,await n.json()]),s(""),o(""),r(null)},h=async a=>{await fetch("/api/books/".concat(a),{method:"DELETE"}),t(e.filter(e=>e.id!==a))};return(0,l.jsxs)("div",{className:"container mx-auto p-4",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Менеджер книг"}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("input",{type:"text",placeholder:"Название",value:a,onChange:e=>s(e.target.value),className:"border p-2 mr-2 rounded-xl"}),(0,l.jsx)("input",{type:"text",placeholder:"Автор",value:i,onChange:e=>o(e.target.value),className:"border p-2 mr-2 rounded-xl"}),(0,l.jsx)("input",{type:"file",accept:"application/pdf",onChange:e=>r(e.target.files[0]),className:"border p-2 mb-2 rounded-xl"}),(0,l.jsx)("button",{onClick:p,className:"bg-blue-500 text-white px-4 py-2 ml-2 rounded-xl",children:"Добавить"})]}),(0,l.jsx)("ul",{children:e.map(e=>(0,l.jsxs)("li",{className:"flex justify-between items-center border-b py-2",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:e.title})," - ",e.author]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("a",{href:"/".concat(e.id),className:"bg-green-500 text-white px-2 py-1 rounded-xl mr-2",children:"Прочитать"}),(0,l.jsx)("button",{onClick:()=>h(e.id),className:"bg-red-500 text-white px-2 py-1 rounded-xl",children:"Удалить"})]})]},e.id))})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(2936)),_N_E=e.O()}]);